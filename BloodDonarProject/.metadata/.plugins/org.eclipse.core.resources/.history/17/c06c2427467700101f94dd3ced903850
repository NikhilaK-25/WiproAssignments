package com.nk.wipro.controller;


import lombok.RequiredArgsConstructor;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import com.nk.wipro.entity.Donor;
import com.nk.wipro.services.DonorService;

import jakarta.validation.Valid;
import java.util.List;

@RestController
@RequestMapping("/donors")
@RequiredArgsConstructor
public class DonorController {

    private final DonorService donorService;

    @PostMapping
    public ResponseEntity<Donor> addDonor(@Valid @RequestBody Donor donor) {
        return ResponseEntity.ok(donorService.addDonor(donor));
    }

    @PutMapping("/{id}")
    public ResponseEntity<Donor> updateDonor(@PathVariable Long id, @Valid @RequestBody Donor donor) {
        return ResponseEntity.ok(donorService.updateDonor(id, donor));
    }

    @GetMapping("/bloodGroup/{bloodGroup}")
    public ResponseEntity<List<Donor>> getDonorsByBloodGroup(@PathVariable String bloodGroup) {
        return ResponseEntity.ok(donorService.getDonorsByBloodGroup(bloodGroup));
    }

    @GetMapping("/city/{city}")
    public ResponseEntity<List<Donor>> getDonorsByCity(@PathVariable String city) {
        return ResponseEntity.ok(donorService.getDonorsByCity(city));
    }

    @GetMapping("/company/{company}")
    public ResponseEntity<List<Donor>> getDonorsByCompany(@PathVariable String company) {
        return ResponseEntity.ok(donorService.getDonorsByCompany(company));
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<String> deleteDonor(@PathVariable Long id) {
        donorService.deleteDonor(id);
        return ResponseEntity.ok("Donor deleted successfully");
    }
}
